!function o(a,s,f){function u(e,r){if(!s[e]){if(!a[e]){var t="function"==typeof require&&require;if(!r&&t)return t(e,!0);if(c)return c(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var i=s[e]={exports:{}};a[e][0].call(i.exports,function(r){return u(a[e][1][r]||r)},i,i.exports,o,a,s,f)}return s[e].exports}for(var c="function"==typeof require&&require,r=0;r<f.length;r++)u(f[r]);return u}({1:[function(r,e,t){"use strict";var n;n=r("./"),window.decodeTiff=n},{"./":2}],2:[function(r,e,t){"use strict";var w={256:"imageWidth",257:"imageLength",258:"bitsPerSample",259:"compression",262:"photometricInterpretation",273:"stripOffsets",278:"rowsPerStrip",279:"stripByteCounts",296:"resolutionUnit",320:"colorMap"};function n(u){var r=0,c=void 0,o={},e=void 0;function p(r,e){var t=r,n=r+e;if(c)return u.subarray(t,n);for(var i=u.subarray(t,n),o=new Uint8Array(n-t),a=0;a<i.byteLength;a++)o[i.byteLength-a-1]=i[a];return o}function a(r){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,t=arguments[2];if(c){var n=new DataView(u.buffer);if(1<e||t){for(var i=new Uint16Array(e),o=0;o<e;o++)i[o]=n.getUint16(r+(o<<1));return i}return n.getUint16(r)}var a=new DataView(p(r,e<<1).buffer);if(1<e||t){for(var s=new Uint16Array(e),f=0;f<e;f++)s[f]=a.getUint16(f<<1);return s}return a.getUint16(0)}function s(r){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,t=arguments[2];if(c){var n=new DataView(u.buffer);if(1<e||t){for(var i=new Uint32Array(e),o=0;o<e;o++)i[o]=n.getUint32(r+(o<<2));return i}return n.getUint32(r)}var a=new DataView(p(r,e<<2).buffer);if(1<e||t){for(var s=new Uint32Array(e),f=0;f<e;f++)s[f]=a.getUint32(f<<2);return s}return a.getUint32(0)}function t(r,e,t,n){var i=w[r];i&&(o[i]=function(r,e,t){var n=function(r,e){switch(r){case 1:return e;case 3:return e<<1;case 4:return e<<2;case 5:return e<<3;default:return e<<2}}(r,e),i=void 0;4<n&&(t=s(t)),i=n<4?4/n:e;var o=void 0;switch(r){case 1:break;case 3:o=a(t,i,!0);break;case 4:o=s(t,i,!0)}if(o)return n<4?c?o.slice(0,i-e):o.slice(i-e):o}(e,t,n))}function n(r){for(var e=new Uint8Array(r.stripByteCounts.reduce(function(r,e){return r+e},0)),t=0,n=0;n<r.stripOffsets.length;n++){var i=u.subarray(r.stripOffsets[n],r.stripOffsets[n]+r.stripByteCounts[n]);e.set(i,t),t+=i.byteLength}return e}if(77===u[0]&&77===u[1])c=!0;else{if(73!==u[0]||73!==u[1])throw new Error("Invalid byte order "+u[0]+u[1]);c=!1}if(42!==p(2,2)[1])throw new Error("not tiff");for(var i=[],f=s(4);0!==f;f=s(r)){var d=a(r=f);o={},r+=2;for(var l=0;l<d;l++){t(a(r),a(r+=2),s(r+=2),r+=4),r+=4}e=n(o),i.push({stripData:e,ifdEntries:o})}return i}function u(r,e){var t=r.compression;if(t&&1!==t[0])throw 2===t[0]?new Error("CCITT group3 decompressionion is not implemented."):5===t[0]?new Error("LZW decompressionion is not implemented."):6===t[0]?new Error("JPEG decompressionion is not implemented."):7===t[0]?new Error("JPEG2 decompressionion is not implemented."):8===t[0]?new Error("Zip (Adove Deflate) decompressionion is not implemented."):32773===t[0]?new Error("Packbits decompression is not implemented."):new Error("Unknown compression type: "+t[0]);return e}e.exports={decode:function(r){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{singlePage:!0,normalizeStripData:!0},e=n(new Uint8Array(r)).map(function(r,e){var t=r.ifdEntries.imageWidth[0],n=r.ifdEntries.imageLength[0];return!0!==i.normalizeStripData?{width:t,height:n,data:function(r,e){r.colorMap;var t=r.bitsPerSample,n=void r.photometricInterpretation;switch(e=u(r,e),t[0]){case 1:case 2:case 4:case 8:n=e;break;case 16:n=new Uint16Array(e.length/2);for(var i=0;i<e.length;i+=2)n[i/2]=e[i+1]<<8|e[i];break;case 24:for(n=new Uint32Array(e.length/3),i=0;i<e.length;i+=3)n[i/3]=e[i+2]<<16|e[i+1]<<8|e[i];break;case 32:for(n=new Uint32Array(e.length/4),i=0;i<e.length;i+=4)n[i/4]=e[i+3]<<16|e[i+2]<<16|e[i+1]<<8|e[i]}return n}(r.ifdEntries,r.stripData),ifdEntries:r.ifdEntries}:{width:t,height:n,data:function(r,e){var t=r.colorMap,n=r.bitsPerSample,i=r.photometricInterpretation,o=void 0;if(e=u(r,e),!n)throw new Error("Bilevel image decode is not implemented.");if(t)throw new Error("Palette-color image decode is not implemented.");if(i[0]=4===n.length)return e;if(i[0]=3===n.length){o=new Uint8Array(e.length/3*4);for(var a=0;a<e.length/3;a++)o[4*a]=e[3*a],o[4*a+1]=e[3*a+1],o[4*a+2]=e[3*a+2],o[4*a+3]=255;return o}if(i[0]<2&&1===n.length&&4===n[0]){o=new Uint8Array(4*e.length);for(var s=0;s<e.length;s++)o[4*s]=e[s]<<4,o[4*s+1]=e[s+1]<<4,o[4*s+2]=e[s+2]<<4,o[4*s+3]=255;return o}if(i[0]<2&&1===n.length&&8===n[0]){o=new Uint8Array(4*e.length);for(var f=0;f<e.length;f++)o[4*f]=e[f],o[4*f+1]=e[f+1],o[4*f+2]=e[f+2],o[4*f+3]=255;return o}throw new Error("Can't detect image type. PhotometricInterpretation: "+i[0]+", BitsPerSample: "+n)}(r.ifdEntries,r.stripData),ifdEntries:r.ifdEntries}});if(i.singlePage){if(!e||!e.length)throw new Error("No pages");return e[0]}return e}}},{}]},{},[1]);
